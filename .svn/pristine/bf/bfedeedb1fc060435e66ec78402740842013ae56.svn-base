<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<style>
#wrapperMain{
	box-sizing: border-box;
	min-width: 800px;
}

.box {
	background-color: rgb(250, 250, 250);
	border-radius: 20px;
	border:rgb(230, 230, 230) solid 1px;
}

#myClsDiv{
	width:100%;
	height:300px;
}

.cl {
	display : inline-block;
}

.headComment {
	margin : 5px;
}

#myContentDiv {
	width:100%;
	height:250px;
	display:flex;
}

#myNews {
	width:50%;
	margin-right : 10px;
}
#myMeals {
	width:50%;
}
#acad {
	height:250px;
}
h2{
	font-size: 20px;
}
</style>
<script type="text/javascript" src="/resources/js/jquery.min.js" ></script> 
<script type="text/javascript" src="/resources/js/commonFunction.js" ></script>
<script type="text/javascript">
// 전역변수
var schulCode = "${SCHOOL_INFO.schulCode}";
window.onload = function(){
	console.log("${SCHOOL_INFO}");
	
	// 급식 정보
	getMeals();
}

//급식 정보
const getMeals = function(){
	$.ajax({
		url:"/mainPageMeals",
		method:"post",
		dataType:"json",
		beforeSend:function(xhr){
			xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
		},
		success:function(res){
			console.log("res : ", res);
			let str = "";
			res.forEach(function(item, index){
				str += 	`
						<div><b>[\${dateFormat(item.dietDe)}] \${item.schulVO.schulNm}</b></div>
						<div>\${item.dietMenu}</div>
						`;	
			});
			if(str != ""){
				document.querySelector("#mealsContainer").innerHTML = str;
			};
		}
	})
}
</script>

<h1>학교 메인 페이지</h1>
<h2>학교 코드: "${SCHOOL_INFO.schulCode}"</h2>
<h2>학교 이름: "${SCHOOL_INFO.schulNm}"</h2>

<a href="/employee/employeeList?schulCode=${SCHOOL_INFO.schulCode}">교직원 목록</a><br>
<a href="/employee/studentList?schulCode=${SCHOOL_INFO.schulCode}">학생 목록</a><br>
<a href="/school/dataRoom?schulCode=${SCHOOL_INFO.schulCode}">자료실 목록</a>

<div class="breadcome-area">
	<div class="container-fluid">
		<div class="row">
			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
				<div class="breadcome-list">
					<div class="row">
						<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
							<div class="breadcome-heading">
								<form role="search" class="sr-input-func">
									<input type="text" placeholder="Search..." class="search-int form-control">
									<a href="#"><i class="fa fa-search"></i></a>
								</form>
							</div>
						</div>
						<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
							<ul class="breadcome-menu">
								<li><a href="#">Home</a> <span class="bread-slash">/</span>
								</li>
								<li><span class="bread-blod">Dashboard V.1</span>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>	
</div>

<div id = "wrapperMain">
	<!-- 나의 학교/클래스 div -->	
	<div id = "myClsDiv" class ="box">
		<div class = "headComment">나의 학교/클래스</div>
		<div id = "clsContainer">
			가입된 학급클래스가 없습니다..
		</div>
	</div>
	<br>
	
	<!-- 내 콘텐츠 div -->	
	<div id = "myContentDiv">
		<!-- 좌 컨텐츠 -->
		<div id = "myNews"  class ="box">
			<div class = "headComment">내 소식</div>
			<div id ="newsContainer">
				<div>[공지사항] 공지사항1공지사항1공지사항1</div>
				<div>[공지사항] 공지사항1공지사항1공지사항1</div>
				<div>[공지사항] 공지사항1공지사항1공지사항1</div>
				<div>[공지사항] 공지사항1공지사항1공지사항1</div>
				<div>[공지사항] 공지사항1공지사항1공지사항1</div>
			</div>
		</div>
		<!-- 우 컨텐츠 -->
		<div id = "myMeals"  class ="box">
			<div class = "headComment">급식</div>
			<div id = "mealsContainer">
				<div>등록된 급식 정보가 없습니다... </div>
			</div>
		</div>
	</div>
	<br>
	
	<!-- 교육부 소식 -->
	<div class = "box">
		<div class = "headComment">교육부 소식</div>
		<div id = "">
			<div>[2024-03-09] 교육부 소식1 교육부 소식1 교육부 소식1 교육부 소식1</div>
			<div>[2024-03-09] 교육부 소식1 교육부 소식1 교육부 소식1 교육부 소식1</div>
			<div>[2024-03-09] 교육부 소식1 교육부 소식1 교육부 소식1 교육부 소식1</div>
			<div>[2024-03-09] 교육부 소식1 교육부 소식1 교육부 소식1 교육부 소식1</div>
			<div>[2024-03-09] 교육부 소식1 교육부 소식1 교육부 소식1 교육부 소식1</div>
			<div>[2024-03-09] 교육부 소식1 교육부 소식1 교육부 소식1 교육부 소식1</div>
			<div>[2024-03-09] 교육부 소식1 교육부 소식1 교육부 소식1 교육부 소식1</div>
		</div>
	</div>
	<br>
	
	
	<!-- 주변 학원 -->
	<div id = "acad" class = "box">
		<div class = "headComment">주변 학원</div>
	</div>
</div>